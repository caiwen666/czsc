# 一 顺序结构

## 1 第一个程序

下面我们从一个例子来引入这节的内容。

**例1.1 第一个程序**

现在请你编写这样一个程序：计算两个数字的和。向程序中输入 `3 5`，程序会输出 `8`。

我们先给出这个程序的完整代码，然后再进行讲解：

```cpp linenums="1"
#include<bits/stdc++.h>
using namespace std;

int main() {
    // 定义两个整形变量
    int a;
   	int b;
    // 分别从键盘输入这两个数字
    cin >> a;
    cin >> b;
    int c;  // 再定义一个变量
    c = a + b;  // 计算 a 与 b 的和并存放到变量 c 中
    cout << c;  // 输出运算结果
    return 0;
}
```

打开我们之前安装的 Dev-C++。点击左上角的文件，点击新建，再点击源文件，然后我们就创建了一个代码文件。然后我们在右侧把上面的代码复制过去。

接下来我们按下键盘上的 F11 键（一般在键盘的最上方，如图所示）

![](http://pic.caiwen.work/i/2025/06/10/6847eead7199c.png)

如果之前文件没有保存的话，按下 F11 会先弹出个窗口，让你选择代码文件保存到的文件夹，你可以自行选择。

稍等片刻，Dev-C++ 就会把我们的代码变成一个程序并自动将生成的程序运行起来。



!!! warning "按下F11没反应？"
    如果你按下 F11 后 Dev-C++ 没有反应的话，可以手动点击 Dev-C++ 上方的这个图标，如图：
    ![](http://pic.caiwen.work/i/2025/06/10/6847f159c5e04.png) 



不出意外的话，我们的屏幕中央将会出现如图所示的黑色窗口。这个黑色窗口就是我们的程序了。现在你已经编写出来了自己的第一个程序（虽然代码都是抄的，不过我们很快就会解释这些代码有什么用处）。

![](http://pic.caiwen.work/i/2025/06/10/6847f2a3d383c.png)

我们可以试一下，输入`3 5`，按下键盘的回车键（回车键的位置如图所示）。

![](http://pic.caiwen.work/i/2025/06/10/6847f3377c969.jpg)

我们发现屏幕上出现了 `8`，我们的程序正确运行了。

![](http://pic.caiwen.work/i/2025/06/10/6847f2de4ab67.png)

下面我们来详细解释一下这段代码。

!!! info "扩展：IDE，编译器，编程语言"
    很多初学者会直接把 Dev-C++ 当作 C++，认为 Dev-C++ 即是 C++ 这个编程语言又是一个软件。这实际上是不对的。在这里我们有必要来区分并解释一下 IDE，编译器和编程语言。

    * 编程语言：C++ 是门编程语言。我们现在就在学习这个编程语言的语法，就和我们在小学学习英语一样，需要从最简单的语法开始学起。
    
    * 编译器：编译器就是把一个代码变成程序的工具。编译器也是一个软件。我们现在感知不到编译器的存在是因为 Dev-C++ 把编译器整合进去了。值得一提的是，如何把代码转变成一个可以被电脑执行的程序，是门很大的学问，是计算机科学的研究方向之一，感兴趣的同学可以去了解一下编译原理。
    
    * IDE：中文的全称叫做集成开发环境。Dev-C++ 就是一个 IDE。通俗点说，IDE 就是帮助我们更方便写代码的工具。如前文所说，Dev-C++ 把编译器也整合进去了，除此之外，Dev-C++ 还整合了代码调试器（GDB），并提供很多其他的东西。我们可以把 IDE 理解为一个增强版的文本编辑器。事实上，如果没有 Dev-C++ ，我们仍然可以写代码，但是就会很麻烦，我们需要用类似“记事本”的文本编辑器写代码，并手动使用编译器来把代码变成程序，然后再打开程序。而有了 Dev-C++，我们只需要按下 F11 ，很多工作就由 Dev-C++ 自动帮我们做好了。

!!! info "扩展：为什么是Dev-C++"
    IDE 有很多，如 Visual Studio Code，Visual Studio，CLion 等，相比起来，这些工具要比 Dev-C++ 更好用，但是我们本次课程还是选择使用 Dev-C++ 来讲解。因为 Dev-C++ 更简单，适合零基础使用，而且后续在打竞赛的时候，考场内的电脑上不一定会有上述的那些高级的 IDE。

## 2 基础语法
### 2.1 程序的基本框架

```cpp linenums="1" hl_lines="1-4 14-15"
#include<bits/stdc++.h>
using namespace std;

int main() {
    // 定义两个整形变量
    int a;
   	int b;
    // 分别从键盘输入这两个数字
    cin >> a;
    cin >> b;
    int c;  // 再定义一个变量
    c = a + b;  // 计算 a 与 b 的和并存放到变量 c 中
    cout << c;  // 输出运算结果
    return 0;
}
```

用颜色标注出来的这些代码我们暂且不解释，先不用管他。我们暂时认为这是程序的一个基本框架，每次你要写一个程序之前先把这些东西复制粘贴上去，然后从这个花括号里面开始正式写代码。

### 2.2 代码的基本规则

我们先从整体上去分析这些代码：

每一行代码都是一个**语句**，告诉程序要干什么。程序运行的时候从上到下依次执行代码

每个**语句**后面都需要有一个分号。这很重要，初学者经常忘记加分号，如果你不加分号的话，按下f11就会出现错误信息：

![](http://pic.caiwen.work/i/2025/06/10/6847fa6b0f734.png)

（容易让人感到疑惑的一点是，我们其实是上一行末尾少了分号，但是 Dev-C++ 的却把下一行提示为错误。我们在排查代码错误的时候也需要了解这一点）

注意，电脑里的符号其实有两种：中文符号和英文符号。前者往往会显得“胖一点”。比如，对于分号，逗号，冒号，双引号，在 Dev-C++ 里，中文符号长上面这样，而英文符号长下面这样：

![](http://pic.caiwen.work/i/2025/06/10/6847fb5104325.png)

我们在代码里一律使用英文符号，否则按下f11也会出现错误信息：

![](http://pic.caiwen.work/i/2025/06/10/6847fbbb70efa.png)

（即使你有良好的英文水平，你也不太能理解这个报错信息。因此，我们在排查代码错误的时候也需要了解这一点）

!!! info "扩展：半角符号和全角符号"
    我们有时候也称英文符号为半角符号，中文符号为全角符号。



上述是初学者最容易犯的两个错误，请务必牢记！

我们继续往下看。双斜杠 `//` 后面的所有内容表示**注释**。

**注释**以双斜杠开始，双斜杠后面的部分都会被忽略，不会被执行。注释的作用主要是用来告诉别人或自己，这行代码是什么意思。

换句话说，我们把上述代码所有 `//` 以及其后面的内容都删掉，也不影响代码的执行：

```cpp linenums="1"
#include<bits/stdc++.h>
using namespace std;

int main() {
    int a;
   	int b;
    cin >> a;
    cin >> b;
    int c;
    c = a + b;
    cout << c;
    return 0;
}
```

并且如标出的部分所示，注释的位置很自由，既可以放在一行的开始，也可以放在一行的末尾。

```cpp linenums="1" hl_lines="8 11"
#include<bits/stdc++.h>
using namespace std;

int main() {
    // 定义两个整形变量
    int a;
   	int b;
    // 分别从键盘输入这两个数字
    cin >> a;
    cin >> b;
    int c;  // 再定义一个变量
    c = a + b;  // 计算 a 与 b 的和并存放到变量 c 中
    cout << c;  // 输出运算结果
    return 0;
}
```

!!! info "扩展：多行注释"
    以 `//` 开始的注释又称为单行注释，因为其注释的部分只能是一行。实际上，我们还有多行注释。多行注释以 `/*` 开始，以 `*/` 结束，这两个中间的部分均为注释，并且可以跨行
    
    ```cpp linenums="1" hl_lines="4-7"
    ...
    int a； 
    int b;
    /*
    cin >> a;
    cin >> b;
    int c; */
    c = a + b;
    cout << c;
    ...
    ```

!!! info "扩展：注释来删除代码"
    注释更多的用处是用来删除代码。如果我们想删除代码的话，最直接的方法就是直接删除掉，但这样的话，如果我们后续又后悔了，想把原来删除的代码找回来，可能就会有点麻烦了。而注释的内容会被忽略，不会被执行，因此我们可以选择在要删除的代码前面加上 `//` ，将其注释掉。我们并没有实际删除这些代码，而是让这些代码不发挥任何作用，这样的话，如果我们后续后悔删除了，可以把 `//` 删掉。

!!! info "扩展：注释快捷键"
    我们可以用鼠标选中代码的一部分，然后按下键盘上的 `Ctrl + /` 的组合键，这样选中的部分就会被注释掉。如果没有选中区域，光标当前所在的行也会被注释掉。

每个语句前面这些空白部分是**缩进**。按下键盘上的 `tab` 键，如图：

![](http://pic.caiwen.work/i/2025/06/10/68480103cdd16.jpg)

即可产生缩进。缩进并不是必须的，加不加都可以，他的主要作用是好看。

没有良好缩进的代码：

```cpp linenums="1"
    for(int i=1;i<=n;i++){
			if(a[i]<b[x]){
			continue;
			}
		ans++;
				b[x]=0x3f3f3f3f;
				if(x==m){
				break;
				}
			x++;
	}
```

有良好缩进的代码：

```cpp linenums="1"
    for(int i=1;i<=n;i++){
		if(a[i]<b[x]){
			continue;
        }
		ans++;
        b[x]=0x3f3f3f3f;
        if(x==m){
            break;
        }
        x++;
	}
```

显然是后者更好看一点

!!! info "扩展：删除缩进"
    如果我们想删除当前行最前面的缩进，可以按下 `Shift + Tab` 快捷键

### 2.3 数据类型和变量

`int a;`

首先这一行代码，其含义为创建了一个**变量**。

**变量**你可以理解为是一个可以存放数据的容器。在这里，我们需要把用户输入的数字先给保存起来，然后再进行加法运算。

创建变量的语法如下

`[数据类型] [变量名称];`

我们需要告诉计算机，我这个容器要存储什么类型的变量，自己我要给这个容器取一个什么样的名字。

变量一定是要先声明后使用。反映在代码里是现在前面写声明变量的代码，后面的代码才能使用这个变量。

#### 2.3.1 数据类型

C++中所有的数据都有他们自己的类型。常见的数据类型有

* 整数，用 `int` 来表示。
* 小数，用 `double` 来表示。在计算机领域我们称小数为浮点数。
* 除此之外还有布尔类型，字符类型，字符串类型。本节课我们先讨论前两个数据类型。

例如：

```cpp
int aaa; //创建整数变量aaa
double bb; //创建小数变量bb
```

!!! info "计算机中数据的表示"
    计算机中所有的数据都是使用 `0` 和 `1` 来编码的。其中对于整数的编码方式比较简单，而对于浮点数的编码方式比较复杂，且并非是简单的把十进制数字转为二进制数字这么简单，这其中也是有很多说法在里面。感兴趣的同学可以阅读 《深入理解计算机系统》的第二章

#### 2.3.2 标识符

变量的名称可以随便取。但是有下面的规则：

* 不能以数字开头，比如 `int 1var;` ，这是不行的，会报错。

* 不能以特殊字符开头，比如 `int ?var;` 这是不行的，也会报错。

* 变量名不能用中文。

* 有一些名字不能用。比如我定义一个变量，我让这个变量取名叫 double，如 `int double;` 这也是不行的。因为`double` 和 `int` 在 C++ 里表示数据类型。你再把他作为变量的名字，就会产生混乱。

不过也不用太担心，我们取的名字一般是没问题的。如果报错了，我们再换一个就好了。

在 C++ 中，除了要给变量取一个名字来方便后面使用外，还有其他的地方也需要我们来自己命名。我们自己起的名字在 C++ 里称为 **标识符**。

#### 2.3.3 赋值

我们说变量的作用是存储数据。那么怎么存储呢，我们给出语法：

`[变量]=[变量/字面量];`

上面这个语句的作用是，把等号右边的东西放到等号左边的变量中。我们称这个操作叫**赋值**。

然后解释一下这里的字面量是什么意思。字面量就是我们可以直接在代码里表示出来的数字，比如：

```cpp
int a;
a=114514; 
```

表示创建整数变量 `a` ，然后把 `114514` 这个整数放到这个变量里。这里的 `114514` 就是我们直接在代码里表示出来的，这就是字面量。`114514` 显然是整数，我们也称之为int 类型的字面量。int 类型字面量放入 int 类型变量，很合理。

再比如：

```cpp
double c;
c=114.514;
```

`114.514` 是直接表示出来的数据，是字面量。这个数字有小数点，显然是一个小数。我们称 `114.514` 是一个 double 类型的字面量。我们把 `114.514` 放入了变量 `c` 中，此后 `c` 就代表 `114.514` （如果 `c` 没有被重新赋值的话）。

把一个变量赋值给另一个变量也是可以的。比如：

```cpp
int a;
int b;
b=1;
a=2;
a=b;
```
我们创建了变量，并分别给其赋值了一个字面量。然后 `a=b` 表示，我们把 `b` 的数据存到 `a` 中。让初学者容易搞混的地方是，`a=b` 并不是表示数学中的等式，而是表示一个**赋值操作**。事实上，我们应该从右到左去读这个赋值语句，即“把 `b` 赋值给 `a`”。上述代码操作完毕之后，`a` 为 `1` ，`b` 也为 `1`。

### 2.4 输入

上面我们给变量存储数据，是通过直接赋值的方法。我们还可以通过用户从键盘输入。我们给出输入的语法：

`cin >> [变量];`

比如 

`cin >> a;`

当程序运行到这一行时，程序会暂停，等待用户输入。我们可以在那个黑色的窗口中输入数字。然后我们按下回车，就表示我输入完了，然后我们刚才输入的内容就会存储到变量 `a` 中。

我们可以把 `cin` 看成电脑的屏幕，`>>` 相当于一个箭头，指明了数据的流向：我们输入的数字从电脑屏幕流向变量中存储起来。

### 2.5 运算

我们现在拿到用户输入的数据了。我们拿到数据之后自然就是想去根据这些数据算出点什么来。这也是计算机的本质。

我们最早对数据，尤其是数字的操作，自然就是加减乘除了。在 C++ 中有如下语法：

* `[变量/字面量]+[变量/字面量];` 把两个数字相加。
* `[变量/字面量]-[变量/字面量];` 把两个数字相减。
* `[变量/字面量]*[变量/字面量];` 把两个数字相乘。在 C++ 里我们需要用星号 `*` 表示乘法。
* `[变量/字面量]/[变量/字面量];` 把两个数字相除。在 C++ 里我们需要用斜杠 `/` 表示除法。

和数学中一样，C++ 中的算式可以任意使用圆括号包裹。比如我们可以 `c=(a+b)*(a-b)`，同样符合四则混合运算的规律。

上述代码中，`c=a+b;` 表示我们把刚才读入进来的两个数字相加。`a+b` 为运算结果，然后我们把这个运算结果存储到变量 `c` 中。

### 2.6 输出

现在我们已经得到最终的结果了，就存放在变量 `c` 中，是时候将其显示到屏幕上了，我们给出语法：

`cout << [变量/字面量];`

如 `cout << c;` 就把变量 `c` 输出。输出的意思就是把这个变量存放的数据显示在我们的那个黑色窗口中。

同样的，我们可以把 `cout` 看成电脑的屏幕，`<<` 就指明了数据的流向，从程序流向电脑的屏幕上并显示出来。可以和上面的输入语法比对一下。

同时如果你英语比较好的话，可以看出 `cin` 中的 `in` 就和输入的意思接近，同理 `cout` 的 `out` 和输出的意思接近。他们两个前面都有 `c` ，也就是 C++ 中的 `c`。

为了有趣一点，我们这里再给出一个新的类型的字面量。我们可以一个内容用双引号包裹起来，然后他就变成了**字符串**类型的字面量。关于字符串的更多内容我们后续才会讲。然后我们就可以写出这样的代码

```cpp
cout << "Hello, World";
```

其中的 `"Hello, World"` 就是一个字符串类型的字面量。

如果我们写

```cpp
cout << "sum: ";
cout << c;
```

虽然我们在代码里，这两行代码是在两行上的。但实际上输出的效果如下：

![](http://pic.caiwen.work/i/2025/06/10/6848154c0a0e1.png)

输出的这两个部分是在同一行的。

如果我们想让他们输出在不同的行中，可以输出一个换行符。换行符用 `endl` 表示。

如将上述代码改为：

```cpp
cout << "sum: ";
cout << endl;
cout << c;
```

输出的效果为：

![](http://pic.caiwen.work/i/2025/06/10/684815f9402ed.png)

由此你也能体会到换行符的效果。

## 3 语法深入

到此为止，我们大概的讲解了一下我们最开始给出的代码，并同时讲解了一些 C++ 的语法知识。但是上面的语法规则还是有点“生硬”且“呆板”了，其实 C++ 的语法还可以更灵活一点。同时，有些内容我们需要在这里给出。

### 3.1 变量

上面我们讲解的声明变量的语法，是一个语句只能声明一个变量。如果我们要声明很多变量的话，可能需要写好几行代码，未免有点麻烦。实际上，如果我们声明的变量都是一个数据类型的话，是可以在一个语句中完成声明的。语法为：

`[数据类型] [变量名1],[变量名2],...;`

变量名以逗号分隔。

比如本文最开始的代码中的：

```cpp
int a;
int b;
```

可以简写为：

```cpp
int a,b;
```

同时我们考虑，如果一个变量在声明之后，没有对其进行赋值，直接就使用这个变量，那么这个变量中存放的数据是什么。我们可以先猜测一下，并写代码进行实验：

```cpp linenums="1"
#include<bits/stdc++.h>
using namespace std;

int main() {
    int a;
    cout << a; 
    return 0;
}
```

运行后，程序输出为 `0`。于是我们猜测，变量声明后，默认值为 `0`；

实际上，变量声明后，其默认存放的数据应该是一个随机数据，你可能只是碰巧遇到了其默认数据为 `0` 的情况。可能会有同学尝试运行很多次，但都输出为 `0`，并产生质疑。所以需要额外强调一点：这里的“随机”并不是每次运行他都会变，而是其默认值不会得到保证的意思。也就是你可能尝试 1000 次都输出为 `0`，但可能第 1001 次就输出为其他数字了。你可以尝试把上述代码的 int 类型改成 double 类型来更明显的看到这一点。

!!! info "扩展：为什么？"
    程序中声明的局部变量一般会存放在两个位置：程序的栈上或是寄存器中。而程序将变量分配到栈或是寄存器上时，并不会把寄存器或是栈清空，这也就导致栈或是寄存器可能还留有先前的数据，这个先前的数据也就成了变量的默认数据。我们无法确保是否一定有先前的数据，因此我们说变量的默认数据是随机的。

所以，为了保险起见，你在使用变量时，一定要确定这个变量已经被赋值过了。不然你的程序可能会出现很难排除的 Bug！

说起变量赋值，根据我们上面所讲，需要先声明变量，然后再给变量赋值，总共至少需要两行代码，还是略微有点麻烦。实际上，我们可以在变量声明的时候就直接给他赋值，如 `int a=1,b,c=2;`。

有了这一点，我们就可以再把最开始的代码简化一下，把 

```cpp
int c;
c = a + b;
```

改为：

```cpp
int c = a + b;
```

### 3.2 输入输出

输入和输出时，我们其实是可以连着使用 `>>` 和 `<<` 的。如我们可以把最开始的代码的

```cpp
cin >> a;
cin >> b;
```

写为

```cpp
cin >> a >> b;
```

如果我们需要输出多个变量的话，类似的也可以连着使用 `<<`。如 `cout << "sum: " << endl << c;`。

此外，C++ 的语法是灵活的。在最开始的代码中，我们需要先把 `a+b` 的结果存放在 `c` 中，然后输出 `c`。但这其实没必要，我们可以直接把一个算式的结果拿来使用。如将最开始的代码改为 `cout << a + b;` 这样写也是可以的，这样的话变量 `c` 就完全没必要了。

我们这里还需要啰嗦一下输入。最开始我们输入的时候，是先输入了第一个数字，然后输入了第二个数字，两个数字之间用空格分隔，然后按下回车表示完成了输入。实际上两个数字之间不一定要用空格分开，我们也可以输入第一个数字之后按下回车再输入第二个数字再回车。输入的内容之间既可以用空格分隔也可以用换行符分隔，输入的内容都放在一行和散落在好几行中，对于程序而言是一样的。

### 3.3 数据类型

首先我们需要先做一个辨析：

|字面量|数据类型|
|-|-|
|1|整数（int）|
|1.0|小数（double）|
|"1"|字符串|

我们发现，即使 `1.0` 在数学中就是 `1`，但在 C++ 中，只要他有小数点，他就是小数。同理，只要有双引号包裹，他就是字符串。

然后我们讨论一下不同数据类型混用的情况。从现在开始我们脑子中需要建立数据类型的意识了。

首先是这样的代码：`int a = 11.4514`。我们把一个 double 类型字面量赋值给了 int 类型变量。看似不同类型的数据之间赋值可能会出问题，但这个代码并不会报错。我们把变量 a 输出之后，会发现输出的结果为 `11`，毕竟 `a` 是个整数类型变量，将其输出是无论如何不可能得到小数的。实际上，将 `11.4514` 赋值给 `a` 的过程中，存在一个**隐式数据类型转换**，即 C++ 自动将 `11.4514` 转为了一个 int 类型的字面量然后再赋值。double 转为 int 时，小数部分会直接丢失。同理，也可以把 int 类型字面量赋值给 double 类型变量，也会发生隐式数据类型转换，但是这个转换就没啥影响了，毕竟小数的精度要高一点。

然后我们考虑数据运算的结果的数据类型。如果是两个同类型数据进行运算的话，那么运算结果的类型显然一致。而如果不同数据类型进行运算的话，如 int 和 double 类型进行运算，那么运算结果的类型为精度更高的类型，即 double 类型。

于是我们看如下的代码：

```cpp
int a=3,b=2;
int c=a/b;
cout<<c;
```

我们分析一下会输出什么。首先排除 `1.5`，因为 `c` 为 int 类型。我们考虑 `3 / 2` 从数学来讲应该为 `1.5`。而 `a` 和 `b` 均为 int 类型，那么 `a/b` 也是 int 类型。类似上文提到的将 double 类型字面量赋值给 int 类型变量，这其中也发生了小数的损失。所以 `c` 为 `1`，输出的结果也是 `1`。

那么我们改成 `double c=a/b;` 呢？一样的输出 `1`。`a/b` 的结果已经是 `1` 了，你再把他转成 double 类型也无济于事了。

那么我们直接写 `cout << 3 / 2;` 呢？也是一样的。根据这部分最开始提到的内容，`3` 和 `2` 由于没有小数点，所以他们是 int 类型，相除也是 int 类型，小数部分还是损失掉的。

我们其实可以写 `cout << 3.0 / 2.0;` 这样就输出 `1.5` 了。但根据不同数据类型的运算规则，我们也可以写 `cout << 3.0 / 2;` 或是 `cout << 3 / 2.0;`，这都是一样的。

但上面这样是对于字面量的。对于变量，诚然，我们可以可以直接把所有 int 改成 double，如：

```cpp
double a=3,b=2;
double c=a/b;
cout<<c;
```

但这样的话，如果我们就需要把大量的变量改为 double 类型。这其实并不是一个好的做法，我们的程序最好把 double 类型的使用控制在一个较小的范围（原因我们会在后续扩展部分讲）。

一个做法是，我们可以考虑把一个 int 类型转为 double 类型然后计算。如 `double c=(double)a/b;`。这里我们又引入了一个新的语法：**显式强制数据类型转换**。我们可以在一个变量前面加一个括号，括号里写上要把这个变量强制转换为什么数据类型，就可以手动进行数据类型转换。上面代码中，我们把 int 类型的 `a` 转为 double 类型（相当于我们扩大了 `a` 的精度），然后根据不同数据类型的运算规则，`(double)a/b` 的结果仍为 double 类型，小数部分得以保留。

当然还有一个做法，我们可以这样写：`double c=1.0*a/b;`。我们在最前面乘以一个 `1.0`，因为 `1.0` 为 double 类型字面量，那么后续所有的运算结果都会变为 double 类型了，小数部分得以保留。这个做法是比较优雅的，我们后续面对处理小数的问题都建议使用这个方法。

不过还需要注意，`double c=a/b*1.0;` 这样的话小数部分还是损失了。因为是先进行 `a/b` 再进行 `*1.0`。`a/b` 时小数就已经丢失了，后面无论怎样都无法再把小数部分搞回来了。

对于小数的输出，我们通常需要将小数保留几位输出。这里我们直接给出做法，但不做过多解释：`printf("%.5lf",x);` 即可把 double 类型的 `x` 保留 5 位小数输出。 `lf` 前的数字就是保留小数的位数，可以把 `5` 改成别的数字，来保留到其他的小数位数。

接下来我们再来看一个神奇的现象，我们来实验一下如下的代码：

```cpp
double a=1.0/3,b=4.0/3,c=5.0/3;
printf("%.10lf\n",c);
printf("%.10lf\n",a+b);
printf("%.20lf\n",c);
printf("%.20lf\n",a+b);
```

输出结果如下：

```text
1.6666666667
1.6666666667
1.66666666666666674068
1.66666666666666651864
```

按理来说，$\frac{1}{3} + \frac{4}{3} = \frac{5}{3}$，我们把 `a+b` 和 `c` 分别输出。如果我们保留 10 位小数输出的话，可以看到结果是一致的。但是如果我们保留 20 位小数的话，可以看到在最后出现了不一致。也就是说，在计算机中，$\frac{1}{3} + \frac{4}{3} \neq \frac{5}{3}$。这是因为，计算机在存储无限小数的时候只能存储小数的一部分（毕竟无限长度的数字也不可能在计算机中存储），换句话说，我们代码中的 `1.0/3` 并非表示真正的 $\frac{1}{3}$，而是一个非常接近 $\frac{1}{3}$ 的小数。由于每个无限小数都有一定的“误差”，所以就会产生上述的情况。

这个现象给我们的启示就是，计算机在计算无限小数的时候会有偏差。

!!! info "扩展：为什么少用 double"
    可能有同学会想：既然 int 和 double 类型混用会有这么多麻烦，那为什么我们不直接一律使用 double 类型呢。

    首先计算机计算 double 类型数据的速度很慢。而算法竞赛中非常看重程序运行的效率。而且 double 类型的数据占用的内存空间比较大。而且 double 类型也会有很多问题，比如类似我们最后提到的，在计算无限小数的时候会有偏差。double 虽然有了小数部分，看似精度很大，但其实 double 类型表示的数据是 “离散” 而不是 “连续” 的。你觉得 double 类型的数据是连续的是因为你接触的值域比较小，计算机总是能恰好表示你的数字，或者找到一个十分接近的数字来近似表示。这种“近似”可能会带来各种 bug。总之，如果不是非要使用 double 应尽可能不用 double。而且令人欣喜的是，在算法竞赛中涉及到小数的题目还是比较少的。

## 4 总结

* 程序的基本框架
* 代码基本规则
    * 顺序执行
    * 分号
    * 英文符号
    * 注释
    * 缩进
* 变量
    * 变量声明
    * 数据类型
        * 隐式数据类型转换
        * 同种/不同种类型运算结果的类型
        * 如何避免运算时小数的丢失
        * 保留小数到指定位数后输出
    * 标识符规则
    * 变量的默认值
* 运算
    * 乘法和除法符号
* 输入与输出
    * 连用 `<<` 和 `>>`
    * 输出字符串字面量

## 5 作业

* **【作业1.1】计算器** https://hydro.ac/d/czsc/p/P1000

* **【作业1.2】三角形面积** https://hydro.ac/d/czsc/p/P1001