# 二 分支结构

在上一节中，我们学习了简单的 C++ 语法。现在我们的程序可以输入输出，创建变量，进行运算，我们的程序是从上到下依次执行的，因此上一节的标题叫做“顺序结构”。但有时候程序从上到下依次执行可能并不能满足我们的需求，比如我们希望程序根据实际情况（比如根据输入的数据）执行不同的代码，只根据前一节的内容是做不到的。所以我们这节课来学习分支语句。

## 1 分支语句

### 1.1 基本语法

分支语句的语法是：

`if(条件){...}`

圆括号里写条件，花括号里可以嵌套代码。这个语句的意思是：如果条件成立的话，程序就执行花括号里的代码。

比如：

```cpp
if(条件1){
    cout << "条件1成立！";
}
```

如果条件 1 成立，那么我们的程序就会输出文本。如果条件 1 不成立，那么这个条件语句就会被跳过，花括号里的代码不执行。

### 1.2 条件

随之而来的问题是，条件要怎么写？我们介绍如下几个新的运算符：

* `==`：判断是否相等。比如条件可以写成 `a==b`，表示如果变量 `a` 与变量 `b` 相等，则条件成立。需要额外注意的是，初学者容易把 `==` 和 `=` 搞混。前者是判断是否相等，而后者是赋值，不要从数学的角度来看 C++ 中的等号！

* `!=`：判断是否不相等。比如条件可以写成 `a!=b`，表示如果变量 `a` 与变量 `b` 不相等，则条件成立。

* `> < >= <=`：分别表示判断大于，小于，大于等于，小于等于。但是值得注意的是不能连用。比如我们要写一个变量 `x` 位于闭区间 $[2,3]$ 的条件，我们不能写成 `2 <= x <= 3` 或者是 `3 >= x >= 2`。具体怎么写我们后面会说。

* `&&`：与，将两个条件连接，两个条件都成立才可以。如刚才那个判断位于闭区间的例子，我们应该写成 `2 <= x && x <= 3`，将 `2 <= x` 和 `x <= 3` 这两个条件连接，只有这两个条件都满足，`2 <= x && x <= 3` 才成立。`&&` 是可以连用的，比如我们可以写 `a == b && b == c && c == d`。

* `||`：或，将两个条件连接，两个条件有一个成立就可以。如我们希望判断变量 `x` 是否位于区间 $(-\infty, 2) \cup [3, +\infty) $，我们应该写成 `x < 2 || x >= 3`。

* `!`：取反，可以把 `!` 放在一个条件的前面，变成一个新的条件。并且新条件和旧条件的成立情况相反：如果原条件成立那么新条件不成立，如果原条件不成立则新条件成立。比如 `!(a>b)` 等价于 `a <= b`。

灵活运用上述运算符，我们可以写出复杂的条件。如有三个变量 `a`、`b`、`c`，我们判断这三个变量是否都相等或是三个变量均为正数，我们可以写出这样的条件：`(a==b && b==c) || (a>0 && b>0 && c>0)`。

### 1.3 更多

if 语句可以嵌套使用。如：

```cpp
if(a > 0){
    cout << "a>0" << endl;
    if(b > 0){
        cout << "b>0" << endl;
    }
}
```

像这样，如果我们的代码里出现“嵌套”了，我们就需要善用缩进了。缩进是我们上节课最开始讲的内容，善用缩进可以让我们的代码看起来更加美观。

我们还可以给 if 语句附加一个 else 部分，如：

```cpp hl_lines="3-5"
if(a > 0){
    cout << "a>0" << endl;
}else{
    cout << "a<=0" << endl;
}
```

表示的意思是，如果 if 语句中的条件不成立，那么就执行 else 后面花括号的代码。

我们还可以给 if 语句附加一个或多个 else if，如：

```cpp
if(a > 3){
    cout << "a>3" << endl;
}else if(a>0){
    cout << "a>0" << endl;
}else if(a>-2){
    cout << "a>-2" << endl;
}
```

表示的意思是，如果 if 语句不成立的话，就接着判断后面的 else if 语句的条件是否成立，成立则执行其紧接着的花括号内的代码，如果不成立则继续判断下一个 else if 语句，以此类推...

初学者可能不容易分清上述代码和下面的代码的区别：

```cpp
if(a > 3){
    cout << "a>3" << endl;
}
if(a>0){
    cout << "a>0" << endl;
}
if(a>-2){
    cout << "a>-2" << endl;
}
```

简单看去，似乎两个代码的效果是一样的，都是一个不成立就接着判断下一个。但这两个代码是不同的。上面的带 else if 的代码是，如果前面的 if 或是 else if 成立了，那么就不再进行后续的判断了。而下面的不带 else if 的代码则无论上面的 if 是否成立，都接着判断下面的 if 语句。具体来说，如果 `a` 为 `4`，上面的代码会输出：

```text
a>3
```

而下面的代码会输出

```text
a>3
a>0
a>-2
```

else 部分也可以加到最后：

```cpp
if(a > 3){
    cout << "a>3";
}else if(a>0){
    cout << "a>0";
}else if(a>-2){
    cout << "a>-2";
}else{
    cout << "a<=-2";
}
```

## 2 再谈变量

### 2.1 变量作用域

在引入了 if 语句之后，我们的代码里就会出现花括号了。但是花括号可能会带来问题。比如下面这个代码：

```cpp linenums="1"
int a;
cin >> a;
if (a > 0) {
    if (a > 2) {
        int b;
        cin >> b;
    }
    cout << a + b;
}
```

这段代码其实是有问题的。在明确指出问题之前我们需要先介绍变量的**作用域**。

变量声明后其实是有其作用的范围的，即变量的作用域。定义的变量只能在自身作用域中使用。作用域根据花括号划分，一个变量的作用域为最小包含它的花括号的区域。如上述代码中，变量 b 的作用域为标出的区域：

```cpp linenums="1" hl_lines="5-6"
int a;
cin >> a;
if (a > 0) {
    if (a > 2) {
        int b;
        cin >> b;
    }
    cout << a + b;
}
```

于是这段代码的错误就很明显了：第八行代码用到了变量 `b`，而变量 `b` 的作用域并没有覆盖到第八行，所以不能使用。

在不同作用域，变量名可以重复。在相同的作用域中，变量名不能重复。如：

```cpp linenums="1" hl_lines="4-11"
int a;
cin >> a;
if (a > 0) {
    int c;
    cin >> c;
    if (a > 2) {
        int b;
        cin >> b;
    }
    int c = 1;
}
```

第四行和第十行都声明了变量 `c`，其作用域是相同的，违反了在相同的作用域中，变量名不能重复的规则，所以代码错误。

```cpp linenums="1"
int a;
cin >> a;
if (a > 0) {
    if (a > 2) {
        int a;
        cin >> a;
    }
}
```

第一行和第五行也都声明了变量 `a`，但是二者的作用域不同。第一行变量的作用域是最外层的区域，第五行变量的作用域为最内层的花括号。所以变量名可以重复。

那么问题来了，此时第六行我们使用了变量 `a`，那么这个 `a` 是第一行的 `a` 还是第五行的 `a`？对此，我们有：使用变量时，如果有多个重名的，看最近的那个，即实际指的是第五行的 `a`。

### 2.2 全局变量

我们之前只关注 `int main() { ` 和 `}` 之间的部分，现在我们把视野放的广一点：

```cpp linenums="1" hl_lines="3-5"
#include<bits/stdc++.h>
using namespace std;

double b; 

int main() { 
	double a; 
    cout << a << endl << b;
	return 0; 
}
```

如代码所示，在标注出来的区域，即 `int main() { ` 前面的部分，也是可以自由写代码的。但是一般来说这个部分只能定义变量，不能进行输入输出，运算等操作。如上述代码就在这个区域定义了一个 double 类型的变量 `b`。

我们分析一下 `b` 的作用域，发现没有任何的花括号包裹他。这种变量拥有最大的作用域：整个代码。我们称这种变量为**全局变量**。除全局变量外，其他的变量，都存在一个花括号将其包裹，被称为**局部变量**。

全局变量相对于局部变量而言，除了作用域最大以外，还有个重要特点：其默认数据为 0。在上节课中我们提到变量的数据默认为随机数据，是针对局部变量而言的。我们可以运行上述代码，会发现输出变量 `a` 为一个随机的数据，而输出变量 `b` 就为 `0`。

## 3 取模运算

C++ 中还有个对于大家来说可能比较陌生的运算：取模运算，用 `%` 来表示。如 `a%b` 就表示为将 `a` 对 `b` 进行取模。取模的意思是取余数，就是得到 `a` 除以 `b` 的余数。比如 `3` 除以 `2` 等于 `1` 余 `1`，因此 $a\%b=1$。再比如，`13` 除以 `5` 等于 `2` 余 `3`。

取模有一些性质或用法我们需要学习：

* $a\%b=k$，则 $k \in [0,b)$。

* 若 $a < b$，则 $a\%b=a$。

* 如果一个数能整除另一个数，如 `3` 能整除 `6`，或者说是 `6` 是 `3` 的倍数，那么一个数对另一个数取模为 `0`。比如 `6` 对 `3` 取模就为 `0`。我们一般用这个性质来判断一个数字能否整除另一个数字，或是一个数是否为另一个数字的倍数。

* 如果一个数对 `2` 取模为 `0`，那么这个数字为偶数（按上一条，说明是 `2` 的倍数，就是偶数）。如果为 `1`，那么这个数字为奇数。根据第一条性质，只会有这两种情况。

* 一个数对 `10` 取模即可得到这个数的个位上的数字。如 `123%10=3`，`3` 恰好是 `123` 的个位数字。

## 4 题目选讲

### 4.1 把一个三位数反转

我们给出一个三位数字，如 `123`，你需要把这个数字反转，如输出 `321`。

一个大概的思路是，我们先把给出的数字的个位数，十位数，百位数分别取出，然后再倒着输出出去。

那么如何把一个数字的各个数位分别取出？方法是：对一个数字反复对 `10` 取模，再除 `10`，即可依次取出数字的个位数，十位数，百位数...

比如 `int a = 123;` 我们有如下过程：

* `int a1 = a % 10;`，`a1` 为 `3`，为 `123` 的个位数。

* `a = a / 10;`，根据我们上节课说的 int 类型除法小数损失的特点，可得到运算后的 `a` 变成了 `12`。

* `int a2 = a % 10;`，`a2` 为 `2`，为 `123` 的十位数。

* `a = a / 10;`，`a` 变成了 `1`。

* `int a3 = a % 10`，`a3` 为 `1`，为 `123` 的百位数。

然后我们把 `b1`、`b2`、`b3` 依次输出，就得到了结果。

代码：

```cpp linenums="1"
#include<bits/stdc++.h>
using namespace std;

int main() { 
    int a;
    cin >> a;
    int a1 = a % 10;
    a = a / 10;
    int a2 = a % 10;
    a = a / 10;
    int a3 = a % 10; 
	cout << a1 << a2 << a3;
	return 0; 
}
```

### 4.2 上取整

首先我们科普两个数学符号：

* $\left \lceil a \right \rceil $：将a向上取整，比如 $\left \lceil 1.2 \right \rceil = 2$
* $\left \lfloor a \right \rfloor $：将a向下取整，比如 $\left \lfloor 1.9 \right \rfloor = 1$

根据我们上节课说的 int 类型除法小数损失的特点，我们可以看出，`/` 运算符作用在两个 int 类型的数据，相当于相除之后下取整。

那么现在给你两个正整数 $a$ 和 $b$，如何计算 $\left \lceil \frac{a}{b} \right \rceil$？

思路是，我们希望知道 $a$ 除以 $b$ 何时会产生小数。如果产生了小数，那么结果其实就是 $\left \lfloor \frac{a}{b} \right \rfloor + 1$。如果没有产生小数，那么 $\left \lceil \frac{a}{b} \right \rceil = \left \lfloor \frac{a}{b} \right \rfloor$。

然后我们发现如果 $b$ 不能整除 $a$ 的话就会，$a$ 除以 $b$ 就会产生小数。所以我们判断 `a%b` 是否为 `0` 即可。

代码：

```cpp linenums="1"
#include<bits/stdc++.h>
using namespace std;

int main() { 
    int a, b;
    cin >> a >> b;
    if (a % b == 0) {
    	cout << a / b;
	} else {
		cout << a / b + 1;
	}
	return 0; 
}
```

## 5 总结

* 分支语句
    * 条件
    * else
    * else if
* 变量作用域
* 全局变量
    * 默认数据为 0
* 取模运算
    * 性质
    * 判断整除
    * 判断寄偶
    * 如何把一个数字各个数位拆分出来

## 6 作业

* **【作业2.1】判断是否为两位数** https://hydro.ac/d/czsc/p/P1002
* **【作业2.2】判断能否被 3，5，7 整除** https://hydro.ac/d/czsc/p/P1003